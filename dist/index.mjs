import{T as t}from'./chunks/TweenManager.mjs';export{C as CubicBezier}from'./chunks/TweenManager.mjs';const s='undefined'!=typeof window,i=s?window:{},h=[];let e=!1,n=0,o=0,r=0,l=0,u=0,c=0,a=!1,f=!1,d=0,_=!0;const p=()=>{if(!s)return;const c=i.performance.now();r=c-u,_?(o=0,_=!1):o=r-l,o<0&&(o=0);const m=t.onTick(r),w=h.length;let g=0;e=!0;for(let t=0;t<w;t++){const s=h[t];null!==s&&!1!==s(o)&&g++}e=!1,n<h.length&&(()=>{let t=0;const s=h.length;for(let i=0;i<s;i++){const s=h[i];null!==s&&(i!==t&&(h[t]=s),t++)}h.length=t,n=t})(),l=r,a&&(g>0||m)?(d=i.requestAnimationFrame(p),f=!0):f=!1},m={stop:t=>{a=!1,s&&i.cancelAnimationFrame(d),f=!1,t&&t()},add:t=>{h.push(t),n++,m.trigger()},reset:()=>{h.length=0,n=0,t.removeAll(),m.stop(),o=0,r=0,l=0,u=0,c=0,a=!1,f=!1,d=0,_=!0},remove:t=>{const s=h.indexOf(t);-1!==s&&(e?(h[s]=null,n--):(h.splice(s,1),n--)),m.trigger()},trigger:()=>{s&&!f&&(_||(l=m.getTime()),f=!0,d=i.requestAnimationFrame(p))},getTime:()=>s?i.performance.now()-u:0,pause:()=>{a&&s&&(c=i.performance.now(),f=!1,a=!1,i.cancelAnimationFrame(d))},play:()=>{!a&&s&&(_||(u+=i.performance.now()-c),m.triggerAnimation())},triggerAnimation:()=>{a=!0,m.trigger()},isPlaying:()=>a};class w{durationMS;isPlaying;delayTime;startTime;easingFunction;progress;totalTime;onTimelineInCallback=null;onTimelineOutCallback=null;onTimelineVisibleCallback=null;onTimelineInvisibleCallback=null;isTimelineIn=!1;isPreviousTimelineIn=!1;isTimelineVisible=!1;isPreviousTimelineVisible=!1;t;i;h;o;l;u;_;p;m;v;T;S;C;k;I;V;M;O;F=!1;constructor(t,s=1){this.durationMS=1e3*s,this.M=this.durationMS>0?1/this.durationMS:0,this.easingFunction=t=>t,this.progress=0,this.delayTime=0,this.isPlaying=!1,this.startTime=null,this.T=0,this.S=0,this.h=null,this.o=null,this.l=null,this.C=!1,this.k=null,this.I=0,this.V=null,this._={},this.p=[],this.m=[],this.v=[],this.F=!1,void 0===t?(this.O=!0,this.t=0,this.i=null,this._.value=0,this.u={value:1}):'function'==typeof t?(this.O=!0,this.t=0,this.i=t,this._.value=0,this.u={value:1}):(this.O=!1,this.t=t,this.i=null,this.u={})}from(t){if('object'==typeof t&&null!==t&&this.O&&null===this.i&&0===this.t&&(this.O=!1,this.t={},this._={},this.u={}),'number'==typeof t)this._.value=t;else if(this.O){const s=t,i=Object.keys(s);for(const t of i){const i=s[t];'number'==typeof i&&(this._[t]=i)}}else{const s=t;for(const t in s){const i=s[t];'number'==typeof i&&(this._[t]=i)}}return this.F=!1,this}to(t,s){return void 0!==s&&(this.durationMS=1e3*s,this.M=this.durationMS>0?1/this.durationMS:0),'object'==typeof t&&null!==t&&this.O&&null===this.i&&0===this.t&&(this.O=!1,this.t={},this._={},this.u={}),'number'==typeof t?this.u.value=t:this.u={...this.u,...t},this.F=!1,this}duration(t){return this.durationMS=1e3*t,this.M=this.durationMS>0?1/this.durationMS:0,this}rewind(){return this.stop(),this.progress=0,this.I=0,this.V=null,this.F&&this.setProgress(0),this}restart(){return this.rewind(),this.start()}loop(t=1/0){return this.T=t,this.S=t,this}onLoop(t){return this.h=t,this}delay(t){return this.delayTime=1e3*t,this}easing(s=(t=>t),i){if(!s)return this;if('string'==typeof s){const h=t.getEasingFromCache(s);i&&t.setEasingOptions(h,i),this.easingFunction=h.get.bind(h)}else if('object'==typeof s&&null!==s&&'get'in s){const h=s;i&&t.setEasingOptions(h,i),this.easingFunction=h.get.bind(h)}else this.easingFunction=s;return this}onUpdate(t){return this.i=t,this}onStart(t){return this.l=t,this}onComplete(t){return this.o=t,this}onTimelineIn(t){return this.onTimelineInCallback=()=>t(this.t),this}onTimelineOut(t){return this.onTimelineOutCallback=()=>t(this.t),this}onTimelineVisible(t){return this.onTimelineVisibleCallback=()=>t(this.t),this}onTimelineInvisible(t){return this.onTimelineInvisibleCallback=()=>t(this.t),this}start(t){const s=this.o;return new Promise(i=>{this.o=t=>{s?.(t),this.o=s,i(this)},this.startTween(t)})}startTween(s=m.getTime()){const i=this.isPlaying;return this.I=0,this.C=!1,this.isPlaying=!0,this.startTime=s+this.delayTime,0===this.durationMS&&0===this.T&&0===this.delayTime?(this.update(s),this.isPlaying=!1):i||(t.add(this),m.triggerAnimation()),this}stop(){return this.isPlaying?(this.isPlaying=!1,t.remove(this),this):this}D(){if(this.F)return;this.p.length=0,this.m.length=0,this.v.length=0;const t=this.t;if(this.O){const t=this._.value??0,s=this.u.value??1;this.p.push('value'),this.m.push(t),this.v.push(s-t)}else if(t){const s=this.u;for(const i in s){const h=s[i];if(void 0===h)continue;let e;if(void 0!==this._[i])e=this._[i];else{const s=t[i];e='number'==typeof s?s:0}this.p.push(i),this.m.push(e),this.v.push(h-e)}}this.F=!0}updateAllValues(t=0){if(this.F||this.D(),this.O)return void(this.m.length>0&&this.i&&this.i(this.m[0]+this.v[0]*this.progress,this.progress,t));const s=this.p.length,i=this.p,h=this.m,e=this.v,n=this.t;for(let t=0;t<s;t++)n[i[t]]=h[t]+e[t]*this.progress;this.i&&this.t&&this.i(this.t,this.progress,t)}setProgress(t,s=!1){this.F||this.D();const i=t<0?0:t>1?1:t;!s&&null!==this.V&&Math.abs(i-this.V)<1e-6||(this.progress=this.easingFunction(i),this.updateAllValues(),this.V=i)}invalidate(){this.V=null,this.F=!1}update(t){if(null===this.startTime||t<this.startTime)return!0;this.F||this.D(),!1===this.C&&(this.l?.(this.t),this.C=!0,m.trigger()),this.I=t-this.startTime;const s=0===this.durationMS?1:this.I*this.M,i=s>1?1:s;this.progress=this.easingFunction(i),null===this.k&&(this.k=t);const h=t-this.k;if(this.k=t,this.updateAllValues(h),1===i){const i=this.startTime;return 0===this.durationMS?(this.isPlaying&&this.o?.(this.t),this.isPlaying=!1,!1):this.S>0?(this.h?.(this.t,this.T-this.S),this.S--,this.startTime+=this.durationMS,this.I=t-this.startTime,!0):(this.isPlaying&&this.o?.(this.t),this.isPlaying=i!==this.startTime||this.isPlaying&&s<1,this.isPlaying)}return!0}}function g(t,s,i=Number.MAX_VALUE){return t<s?s:t>i?i:t}function b(t,s){t.isTimelineVisible=s,t.isTimelineVisible!==t.isPreviousTimelineVisible&&(s?t.onTimelineVisibleCallback?.():t.onTimelineInvisibleCallback?.(),t.isPreviousTimelineVisible=t.isTimelineVisible)}class v{time=0;totalTime=0;isPlaying=!1;P=[];j;S=0;A;L;N=!0;U=null;B='linear';H=1;constructor({delay:t=0,onComplete:s,onLoop:i}={}){this.j=1e3*t,this.A=s,this.L=i}add(t,s=0){return this.R(t,Math.max(0,(this.P.length>0?this.P[this.P.length-1].endTime:0)+1e3*s)),this}at(t,s){return this.R(s,1e3*t),this}R(t,s){const i=void 0!==t.totalTime?t.totalTime:t.durationMS;this.P.push({tween:t,startTime:s,endTime:s+i,duration:i}),this.totalTime=Math.max(this.totalTime,s+i),this.N=!0}delay(t){return this.j=1e3*t,this}loop(t=1/0){return this.S=t,this}easing(t){return this.B=t,this}timeScale(t){return this.H=t,this.U&&this.isPlaying&&this.stop().start(),this}async start(){this.N&&this.W(),this.stop(),this.isPlaying=!0;const t=this.H<0,s=t?this.totalTime:0,i=t?0:this.totalTime;return this.U=new w,this.U.from(s).to(i).duration(this.totalTime/1e3/Math.abs(this.H)).onUpdate(t=>{this.time=t,this.Y(this.time,!1)}).easing(this.B).delay(this.j/1e3).loop(this.S).onLoop(()=>{this.L?.(),this.Y(t?this.totalTime:0,!0)}).onComplete(()=>{this.isPlaying=!1,this.A?.()}).start().then(()=>this)}pause(){return this.isPlaying=!1,this.U?.stop(),this}stop(){return this.pause(),this.U=null,this.time=this.H<0?this.totalTime:0,this.Y(this.time,!0),this}setPosition(t,s=!1){this.isPlaying&&this.pause(),this.N&&this.W(),this.time=g(t,0,this.totalTime),this.Y(this.time,s)}setProgress(t){this.setPosition(g(t,0,1)*this.totalTime)}W(){this.P.sort((t,s)=>t.startTime-s.startTime),this.N=!1}Y(t,s){const i=this.P.length;for(let h=i-1;h>=0;h--){const i=this.P[h];if(t<i.startTime){const t=i.tween;(t.progress>0||t.isTimelineVisible||s)&&(t.setProgress(0,!0),s&&t.invalidate(),b(t,!1))}}for(let h=0;h<i;h++){const i=this.P[h],{tween:e,startTime:n,endTime:o,duration:r}=i;if(t<n)continue;if(t>=o){if(1!==e.progress||s){const t=e.progress;e.setProgress(1,!0),b(e,!0),t<1&&1===e.progress&&e.onTimelineOutCallback?.()}continue}const l=e.progress;e.setProgress(0===r?1:(t-n)/r,!0),b(e,!0),0===l&&e.progress>0&&e.onTimelineInCallback?.(),l<1&&1===e.progress&&e.onTimelineOutCallback?.()}}}const T='undefined'!=typeof window,y=T?window:{};class S{element;smoothing;observer;data;$;K=!1;q=!1;G=!1;J=NaN;X;Z;tt;st;it;ht;et;nt;ot;constructor(t,s,i,h,e=null){this.element=t,this.observer=e,this.X=i.directionOffset||0,this.Z=i.offset||0,this.tt=i.speed||1,this.smoothing=i.smoothing||0,h?this.st=h:i.onUpdate&&(this.st=i.onUpdate),this.it=i.onScrolledIn,this.ht=i.onScrolledOut,this.et=i.onScrolledInOnce,this.nt=i.onScrolledOutOnce,this.$={left:0,top:0,width:0,height:0},this.data={item:t,factor:0,rawFactor:0,rawBoxFactor:0,boxFactor:0,box:this.$,scroll:0,smoothScrollValue:0,isInView:!1,boxIsInView:!1,index:s,originalTop:0,isVisible:!0,data:i.data}}setVisible(t){this.data.isVisible=t}get isVisible(){return this.data.isVisible}resize(t){if(!this.element)return;const s=this.element.getBoundingClientRect();this.$.left=s.left+(T?y.scrollX||y.pageXOffset:0),this.$.top=s.top+t,this.$.width=s.width,this.$.height=s.height,this.data.originalTop=this.$.top}update(t,s,i,h=!1,e=16.6){const n=this.$;if(0===n.height)return;this.data.scroll=t,this.data.smoothScrollValue=this.smoothing&&this.ot?this.ot(t,e,this.smoothing):t;const o=n.top+n.height-this.data.smoothScrollValue+this.X*(i?-1:1)*s+this.Z*s,r=(o-s)/n.height,l=this.tt;this.data.rawFactor=(1-o/(s+n.height)-.5)*l+.5,this.data.rawBoxFactor=(1-r-.5)*l+.5,this.data.factor=this.data.rawFactor<0?0:this.data.rawFactor>1?1:this.data.rawFactor,this.data.boxFactor=this.data.rawBoxFactor<0?0:this.data.rawBoxFactor>1?1:this.data.rawBoxFactor,this.data.isInView=this.data.rawFactor>=0&&this.data.rawFactor<=1,this.data.boxIsInView=this.data.rawBoxFactor>=0&&this.data.rawBoxFactor<=1,this.data.isInView!==this.G&&(this.data.isInView?(this.smoothing&&(this.ot=((t=0)=>(s,i=0,h=.95)=>{const e=h**(60*i/1e3);return t=t*e+s*(1-e)})(t)),this.it?.(this.data),this.K||(this.K=!0,this.et?.(this.data))):(this.ht?.(this.data),this.ot=void 0,this.q||(this.q=!0,this.nt?.(this.data))),this.G=this.data.isInView),this.st&&(this.J!==this.data.factor||h)&&(this.st(this.data),this.J=this.data.factor)}}const k='undefined'!=typeof window,I=k?window:{};let V=!1;if(k)try{const t=Object.defineProperty({},'passive',{get:()=>(V=!0,!0)});I.addEventListener('test',()=>{},t),I.removeEventListener('test',()=>{},t)}catch{}const x=!!V&&{passive:!0};class M{isDown=!1;isLocked=!1;scroll=0;scrollWidth=0;scrollHeight=0;rt=1;lt=.01;ut=0;ct=0;ft=0;P=[];dt=new Set;_t=new Set;wt=null;gt=null;bt=!1;vt=0;Tt=0;yt=!0;St=!1;Ct=new w({y:0}).easing('0.35,0.15,0,1').onUpdate(t=>{k&&I.scrollTo(0,t.y),this.bt=!0,this.scroll=t.y,this.ut=t.y,this.isDown=this.ut>=this.ct,this.ct=this.ut});kt=0;It=0;Vt;xt;Mt;Ot=!1;Ft=null;Dt=0;Pt=0;B;jt;At=this.zt.bind(this);Lt=()=>{this.isLocked||(this.St=!0)};Et=t=>{t.stopPropagation(),this.isLocked||(this.St=!1)};Nt=()=>{this.isLocked||(this.Ct.stop(),this.St=!1)};Ut=()=>{if(this.isLocked)return;this.bt=!0;const t=Math.max(0,this.scrollHeight-this.ft),s=this.jt();this.ut=s<0?0:s>t?t:s,this.Pt=this.scroll,this.Dt=0};constructor({container:t=(k?document.body:null),content:s=(k?document.body:null),easing:i=(t=>Math.min(1,1.001-2**(-10*t))),scrollDuration:h=0,listener:e=(k?window:null),debug:n=!1,onResize:o}={}){if(this.It=h||0,this.Vt=t,this.xt=s,this.Mt=e,this.Ot=n,this.B=i,this.Ft=o||null,this.Mt)if('scrollY'in this.Mt)this.jt=()=>this.Mt.scrollY;else if('pageYOffset'in this.Mt)this.jt=()=>this.Mt.pageYOffset;else{const t=this.Mt;this.jt=()=>t.scrollTop}else this.jt=()=>0;this.Bt(),this.Ht(),m.add(this.At),m.play(),this.resize()}Bt(){if(!this.Mt)return;const t=x,s=this.Mt;s.addEventListener('touchstart',this.Lt,t),s.addEventListener('scroll',this.Ut,t),s.addEventListener('mousedown',this.Et,t),s.addEventListener('wheel',this.Nt,t)}Ht(){this.Ot&&this.Vt&&k&&(this.wt=document.createElement('canvas'),this.Vt.appendChild(this.wt))}zt(t){if(this.isLocked)return!0;if(!this.xt)return!0;const s=this.xt.scrollWidth,i=this.xt.scrollHeight;if(s!==this.scrollWidth||i!==this.scrollHeight)return this.scrollWidth=s,this.scrollHeight=i,s===this.vt&&i===this.Tt||this.resize(),this.vt=s,this.Tt=i,this.scroll=this.Pt=this.ut,this.Rt(this.scroll,t),!0;if(this._t.size>0)for(const s of this._t)this.dt.has(s)&&this.bt||Math.abs(s.data.smoothScrollValue-this.scroll)>this.lt&&s.update(this.scroll,this.ft,this.isDown,!1,t);if(!this.bt){const t=this.jt();Math.abs(t-this.scroll)>1&&(this.bt=!0,this.ut=t,this.Pt=this.scroll,this.Dt=0)}if(!this.bt)return!0;if(Math.abs(this.ut-this.scroll)<this.lt)return this.scroll=this.ut,this.Rt(this.scroll,t),this.St&&this.triggerAnimations(!0),this.bt=!1,!0;this.Dt+=t/1e3;const h=this.St?this.kt:this.It,e=0===h?1:g(this.Dt/h,0,1),n=this.B(e);if(this.scroll=this.Pt+(this.ut-this.Pt)*n,this.yt){this.yt=!1,this.scroll=this.Pt=this.ut;const t=this.isDown;this.isDown=!0,this.triggerAnimations(!0),this.isDown=!1,this.triggerAnimations(!0),this.isDown=t}return this.Rt(this.scroll,t),!0}Rt(t,s=16.6){if(this.isDown=t>=this.ct,this.ct=t,this.dt.size>0)for(const t of this.dt)t.update(this.scroll,this.ft,this.isDown,!1,s);this.gt&&this.Wt()}draw(){this.Rt(this.scroll)}drawAll(){for(const t of this.P)t.update(this.scroll,this.ft,this.isDown,!0)}getScrollPosition(){return this.jt()}resize(){if(!this.Vt||!this.xt||!k)return;this.scroll=this.Pt=this.ct=this.ut,this.scrollHeight=this.xt.scrollHeight,this.ft=I.innerHeight,this.rt=I.devicePixelRatio;const t=I.scrollY||I.pageYOffset;for(let s=0;s<this.P.length;s++)this.P[s].resize(t);if(this.wt){const t=I.innerWidth,s=I.innerHeight,i=this.rt;this.wt.width=t*i,this.wt.height=s*i,Object.assign(this.wt.style,{position:'fixed',left:'0',top:'0',width:t+'px',height:s+'px',pointerEvents:'none',zIndex:'9999999'}),this.gt=this.wt.getContext('2d')}this.Ft&&this.Ft(),this.Yt()}triggerAnimations(t=!1){if(t){const t=this.P.length;for(let s=0;s<t;s++)this.P[s].update(this.scroll,this.ft,this.isDown,!0)}else for(const t of this.dt)t.update(this.scroll,this.ft,this.isDown,!0);this.gt&&this.Wt()}Wt(){if(!this.gt||!this.wt)return;const t=this.gt;t.clearRect(0,0,this.wt.width,this.wt.height),t.strokeStyle='#f00',t.lineWidth=2*this.rt,t.beginPath();const s=this.rt,i=this.ft;for(const h of[...this.dt,...this._t]){const e=h.data,n=e.box.top-e.scroll;n+e.box.height>=0&&n<=i&&t.rect(e.box.left*s,n*s,e.box.width*s,e.box.height*s)}t.stroke()}add(t,s,i={}){const h=Array.isArray(t)?t:[t];let e,n;'function'==typeof s?(e=s,n=i):(n=s||{},e=void 0);const o=I.IntersectionObserver,r=n.directionOffset||0,l=n.offset||0,u=n.speed||1;let c=null;k&&o&&o&&(c=new o(t=>{for(const s of t){const t=s.target,i=this.P.find(s=>s.element===t);if(i){const t=s.isIntersecting;i.setVisible(t),t&&!i.smoothing?this.dt.add(i):t||i.smoothing||this.dt.delete(i),i.update(this.scroll,this.ft,this.isDown)}}},{root:void 0===n.observeIn?null:n.observeIn,rootMargin:`${r?100*r:1/u*100}% 0% ${r?100*r:l?100*l:1/u*100}% 0%`,threshold:0}));const a=k?I.scrollY||I.pageYOffset:0;for(let t=0;t<h.length;t++){const s=h[t],i=new S(s,t,n,e,c);i.resize(a),c?(c.observe(s),i.setVisible(!1)):(this.dt.add(i),i.update(this.scroll,this.ft,this.isDown,!0)),i.smoothing&&this._t.add(i),this.P.push(i)}}Yt(){this.dt.clear(),this._t.clear();for(const t of this.P)t.smoothing&&this._t.add(t),t.isVisible&&!t.smoothing&&this.dt.add(t)}remove(t){const s=new Set(Array.isArray(t)?t:[t]),i=[];for(const t of this.P)s.has(t.element)?(t.observer?.unobserve(t.element),this.dt.delete(t),this._t.delete(t)):i.push(t);this.P=i}getBox(t){const s=t.getBoundingClientRect();return{left:s.left+(k?I.scrollX||I.pageXOffset:0),top:s.top+(k?I.scrollY||I.pageYOffset:0),width:s.width,height:s.height}}scrollTo(t=0,s=null){const i=s??g(25e-5*Math.abs(t-this.scroll),.25,2.5);return this.Ct.from({y:this.scroll}).to({y:t},i).start()}scrollToElement(t,s=0,i=null){const h=this.getBox(t);return this.scrollTo(h.top+s,i)}reset(){for(const t of this.P)t.observer?.unobserve(t.element);this.P.length=0,this.dt.clear(),this._t.clear(),this.ft=0}stop(){this.bt=!1,this.Ct.stop()}lock(){this.isLocked=!0}unlock(){this.isLocked=!1,k&&I.scrollTo(0,this.scroll)}setContent(t){this.xt=t,this.resize()}unsetContent(){this.xt=null}setScrollDuration(t){this.It=t}setTouchScrollDuration(t){this.kt=t}destroy(){if(this.wt?.remove(),this.Mt){const t=this.Mt,s=x;t.removeEventListener('touchstart',this.Lt,s),t.removeEventListener('wheel',this.Nt,s),t.removeEventListener('mousedown',this.Et,s),t.removeEventListener('scroll',this.Ut,s)}this.reset(),this.stop(),m.remove(this.At)}}
/**
 * @license
 * Monomove - utilities for moving things
 *
 * Copyright © 2021-2025 Monokai (monokai.com)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */function O(t,s=1){return new w(t,s)}const F=(t,s,i=1,h='linear')=>O(t,i).to(s).easing(h).start(),D=t=>new v(t),P=t=>O().duration(t).start();function j(t,s,i={},h={}){const e=new M(h);return e.add(t,s,i),e}export{m as RenderLoop,M as SmoothScroller,v as Timeline,w as Tween,t as TweenManager,F as animate,P as delay,j as smoothScroll,D as timeline,O as tween};
