import{T as t}from'./chunks/TweenManager.mjs';export{C as CubicBezier}from'./chunks/TweenManager.mjs';const s=window,i=void 0!==s,h=[];let e=!1,n=0,o=0,r=0,l=0,c=0,u=0,a=!1,f=!1,_=0,d=!0;const p=()=>{if(!i)return;const u=s.performance.now();r=u-c,d?(o=0,d=!1):o=r-l,o<0&&(o=0);const m=t.onTick(r),g=h.length;let w=0;e=!0;for(let t=0;t<g;t++){const s=h[t];null!==s&&!1!==s(o)&&w++}e=!1,n<h.length&&(()=>{let t=0;const s=h.length;for(let i=0;i<s;i++){const s=h[i];null!==s&&(i!==t&&(h[t]=s),t++)}h.length=t,n=t})(),l=r,a&&(w>0||m)?(_=s.requestAnimationFrame(p),f=!0):f=!1},m={stop:t=>{a=!1,i&&s.cancelAnimationFrame(_),f=!1,t&&t()},add:t=>{h.push(t),n++,m.trigger()},reset:()=>{h.length=0,n=0,t.removeAll(),m.stop(),o=0,r=0,l=0,c=0,u=0,a=!1,f=!1,_=0,d=!0},remove:t=>{const s=h.indexOf(t);-1!==s&&(e?(h[s]=null,n--):(h.splice(s,1),n--)),m.trigger()},trigger:()=>{i&&!f&&(d||(l=m.getTime()),f=!0,_=s.requestAnimationFrame(p))},getTime:()=>i?s.performance.now()-c:0,pause:()=>{a&&i&&(u=s.performance.now(),f=!1,a=!1,s.cancelAnimationFrame(_))},play:()=>{!a&&i&&(d||(c+=s.performance.now()-u),m.triggerAnimation())},triggerAnimation:()=>{a=!0,m.trigger()},isPlaying:()=>a};class g{durationMS;isPlaying;delayTime;startTime;easingFunction;progress;totalTime;onTimelineInCallback=null;onTimelineOutCallback=null;onTimelineVisibleCallback=null;onTimelineInvisibleCallback=null;isTimelineIn=!1;isPreviousTimelineIn=!1;isTimelineVisible=!1;isPreviousTimelineVisible=!1;t;i;h;o;l;u;_;p;m;v;T;S;C;k;I;V;M;O;D=!1;constructor(t,s=1){this.durationMS=1e3*s,this.M=this.durationMS>0?1/this.durationMS:0,this.easingFunction=t=>t,this.progress=0,this.delayTime=0,this.isPlaying=!1,this.startTime=null,this.T=0,this.S=0,this.h=null,this.o=null,this.l=null,this.C=!1,this.k=null,this.I=0,this.V=null,this._={},this.p=[],this.m=[],this.v=[],this.D=!1,void 0===t?(this.O=!0,this.t=0,this.i=null,this._.value=0,this.u={value:1}):'function'==typeof t?(this.O=!0,this.t=0,this.i=t,this._.value=0,this.u={value:1}):(this.O=!1,this.t=t,this.i=null,this.u={})}from(t){if('object'==typeof t&&null!==t&&this.O&&null===this.i&&0===this.t&&(this.O=!1,this.t={},this._={},this.u={}),'number'==typeof t)this._.value=t;else if(this.O){const s=t,i=Object.keys(s);for(const t of i){const i=s[t];'number'==typeof i&&(this._[t]=i)}}else{const s=t;for(const t in s){const i=s[t];'number'==typeof i&&(this._[t]=i)}}return this.D=!1,this}to(t,s){return void 0!==s&&(this.durationMS=1e3*s,this.M=this.durationMS>0?1/this.durationMS:0),'object'==typeof t&&null!==t&&this.O&&null===this.i&&0===this.t&&(this.O=!1,this.t={},this._={},this.u={}),'number'==typeof t?this.u.value=t:this.u={...this.u,...t},this.D=!1,this}duration(t){return this.durationMS=1e3*t,this.M=this.durationMS>0?1/this.durationMS:0,this}rewind(){return this.stop(),this.progress=0,this.I=0,this.V=null,this.D&&this.setProgress(0),this}restart(){return this.rewind(),this.start()}loop(t=1/0){return this.T=t,this.S=t,this}onLoop(t){return this.h=t,this}delay(t){return this.delayTime=1e3*t,this}easing(s=(t=>t),i){if(!s)return this;if('string'==typeof s){const h=t.getEasingFromCache(s);i&&t.setEasingOptions(h,i),this.easingFunction=h.get.bind(h)}else if('object'==typeof s&&null!==s&&'get'in s){const h=s;i&&t.setEasingOptions(h,i),this.easingFunction=h.get.bind(h)}else this.easingFunction=s;return this}onUpdate(t){return this.i=t,this}onStart(t){return this.l=t,this}onComplete(t){return this.o=t,this}onTimelineIn(t){return this.onTimelineInCallback=()=>t(this.t),this}onTimelineOut(t){return this.onTimelineOutCallback=()=>t(this.t),this}onTimelineVisible(t){return this.onTimelineVisibleCallback=()=>t(this.t),this}onTimelineInvisible(t){return this.onTimelineInvisibleCallback=()=>t(this.t),this}start(t){const s=this.o;return new Promise(i=>{this.o=t=>{s?.(t),this.o=s,i(this)},this.startTween(t)})}startTween(s=m.getTime()){const i=this.isPlaying;return this.I=0,this.C=!1,this.isPlaying=!0,this.startTime=s+this.delayTime,0===this.durationMS&&0===this.T&&0===this.delayTime?(this.update(s),this.isPlaying=!1):i||(t.add(this),m.triggerAnimation()),this}stop(){return this.isPlaying?(this.isPlaying=!1,t.remove(this),this):this}F(){if(this.D)return;this.p.length=0,this.m.length=0,this.v.length=0;const t=this.t;if(this.O){const t=this._.value??0,s=this.u.value??1;this.p.push('value'),this.m.push(t),this.v.push(s-t)}else if(t){const s=this.u;for(const i in s){const h=s[i];if(void 0===h)continue;let e;if(void 0!==this._[i])e=this._[i];else{const s=t[i];e='number'==typeof s?s:0}this.p.push(i),this.m.push(e),this.v.push(h-e)}}this.D=!0}updateAllValues(t=0){if(this.D||this.F(),this.O)return void(this.m.length>0&&this.i&&this.i(this.m[0]+this.v[0]*this.progress,this.progress,t));const s=this.p.length,i=this.p,h=this.m,e=this.v,n=this.t;for(let t=0;t<s;t++)n[i[t]]=h[t]+e[t]*this.progress;this.i&&this.t&&this.i(this.t,this.progress,t)}setProgress(t,s=!1){this.D||this.F();const i=t<0?0:t>1?1:t;!s&&null!==this.V&&Math.abs(i-this.V)<1e-6||(this.progress=this.easingFunction(i),this.updateAllValues(),this.V=i)}invalidate(){this.V=null,this.D=!1}update(t){if(null===this.startTime||t<this.startTime)return!0;this.D||this.F(),!1===this.C&&(this.l?.(this.t),this.C=!0,m.trigger()),this.I=t-this.startTime;const s=0===this.durationMS?1:this.I*this.M,i=s>1?1:s;this.progress=this.easingFunction(i),null===this.k&&(this.k=t);const h=t-this.k;if(this.k=t,this.updateAllValues(h),1===i){const i=this.startTime;return 0===this.durationMS?(this.isPlaying&&this.o?.(this.t),this.isPlaying=!1,!1):this.S>0?(this.h?.(this.t,this.T-this.S),this.S--,this.startTime+=this.durationMS,this.I=t-this.startTime,!0):(this.isPlaying&&this.o?.(this.t),this.isPlaying=i!==this.startTime||this.isPlaying&&s<1,this.isPlaying)}return!0}}function w(t,s,i=Number.MAX_VALUE){return t<s?s:t>i?i:t}function b(t,s){t.isTimelineVisible=s,t.isTimelineVisible!==t.isPreviousTimelineVisible&&(s?t.onTimelineVisibleCallback?.():t.onTimelineInvisibleCallback?.(),t.isPreviousTimelineVisible=t.isTimelineVisible)}class v{time=0;totalTime=0;isPlaying=!1;P=[];j;S=0;A;L;N=!0;U=null;B='linear';H=1;constructor({delay:t=0,onComplete:s,onLoop:i}={}){this.j=1e3*t,this.A=s,this.L=i}add(t,s=0){return this.R(t,Math.max(0,(this.P.length>0?this.P[this.P.length-1].endTime:0)+1e3*s)),this}at(t,s){return this.R(s,1e3*t),this}R(t,s){const i=void 0!==t.totalTime?t.totalTime:t.durationMS;this.P.push({tween:t,startTime:s,endTime:s+i,duration:i}),this.totalTime=Math.max(this.totalTime,s+i),this.N=!0}delay(t){return this.j=1e3*t,this}loop(t=1/0){return this.S=t,this}easing(t){return this.B=t,this}timeScale(t){return this.H=t,this.U&&this.isPlaying&&this.stop().start(),this}async start(){this.N&&this.W(),this.stop(),this.isPlaying=!0;const t=this.H<0,s=t?this.totalTime:0,i=t?0:this.totalTime;return this.U=new g,this.U.from(s).to(i).duration(this.totalTime/1e3/Math.abs(this.H)).onUpdate(t=>{this.time=t,this.Y(this.time,!1)}).easing(this.B).delay(this.j/1e3).loop(this.S).onLoop(()=>{this.L?.(),this.Y(t?this.totalTime:0,!0)}).onComplete(()=>{this.isPlaying=!1,this.A?.()}).start().then(()=>this)}pause(){return this.isPlaying=!1,this.U?.stop(),this}stop(){return this.pause(),this.U=null,this.time=this.H<0?this.totalTime:0,this.Y(this.time,!0),this}setPosition(t,s=!1){this.isPlaying&&this.pause(),this.N&&this.W(),this.time=w(t,0,this.totalTime),this.Y(this.time,s)}setProgress(t){this.setPosition(w(t,0,1)*this.totalTime)}W(){this.P.sort((t,s)=>t.startTime-s.startTime),this.N=!1}Y(t,s){const i=this.P.length;for(let h=i-1;h>=0;h--){const i=this.P[h];if(t<i.startTime){const t=i.tween;(t.progress>0||t.isTimelineVisible||s)&&(t.setProgress(0,!0),s&&t.invalidate(),b(t,!1))}}for(let h=0;h<i;h++){const i=this.P[h],{tween:e,startTime:n,endTime:o,duration:r}=i;if(t<n)continue;if(t>=o){if(1!==e.progress||s){const t=e.progress;e.setProgress(1,!0),b(e,!0),t<1&&1===e.progress&&e.onTimelineOutCallback?.()}continue}const l=e.progress;e.setProgress(0===r?1:(t-n)/r,!0),b(e,!0),0===l&&e.progress>0&&e.onTimelineInCallback?.(),l<1&&1===e.progress&&e.onTimelineOutCallback?.()}}}const T=window;class S{element;smoothing;observer;$;K;q=!1;G=!1;J=!1;X=NaN;Z;tt;st;it;ht;et;nt;ot;rt;constructor(t,s,i,h,e=null){this.element=t,this.observer=e,this.Z=i.directionOffset||0,this.tt=i.offset||0,this.st=i.speed||1,this.smoothing=i.smoothing||0,h?this.it=h:i.onUpdate&&(this.it=i.onUpdate),this.ht=i.onScrolledIn,this.et=i.onScrolledOut,this.nt=i.onScrolledInOnce,this.ot=i.onScrolledOutOnce,this.$={left:0,top:0,width:0,height:0},this.K={item:t,factor:0,rawFactor:0,rawBoxFactor:0,boxFactor:0,box:this.$,scroll:0,smoothScrollValue:0,isInView:!1,boxIsInView:!1,index:s,originalTop:0,isVisible:!0,data:i.data}}setVisible(t){this.K.isVisible=t}get isVisible(){return this.K.isVisible}getData(){return this.K}resize(t,s){const i=this.element.getBoundingClientRect();this.$.left=i.left+(T.scrollX||T.pageXOffset),this.$.top=i.top+t,this.$.width=i.width,this.$.height=i.height,this.K.originalTop=this.$.top}update(t,s,i,h=!1,e=16.6){const n=this.$;if(0===n.height)return;this.K.scroll=t,this.K.smoothScrollValue=this.smoothing&&this.rt?this.rt(t,60*e/1e3,this.smoothing):t;const o=n.top+n.height-this.K.smoothScrollValue+this.Z*(i?-1:1)*s+this.tt*s,r=(o-s)/n.height,l=this.st;this.K.rawFactor=(1-o/(s+n.height)-.5)*l+.5,this.K.rawBoxFactor=(1-r-.5)*l+.5,this.K.factor=this.K.rawFactor<0?0:this.K.rawFactor>1?1:this.K.rawFactor,this.K.boxFactor=this.K.rawBoxFactor<0?0:this.K.rawBoxFactor>1?1:this.K.rawBoxFactor,this.K.isInView=this.K.rawFactor>=0&&this.K.rawFactor<=1,this.K.boxIsInView=this.K.rawBoxFactor>=0&&this.K.rawBoxFactor<=1,this.K.isInView!==this.J&&(this.K.isInView?(this.smoothing&&(this.rt=((t=0)=>(s,i=0,h=.95)=>s+(t-s)*h**i)(t)),this.ht?.(this.K),this.q||(this.q=!0,this.nt?.(this.K))):(this.et?.(this.K),this.rt=void 0,this.G||(this.G=!0,this.ot?.(this.K))),this.J=this.K.isInView),this.it&&(this.X!==this.K.factor||h)&&(this.it(this.K),this.X=this.K.factor)}}const y=window;let k=!1;if(void 0!==y)try{const t=Object.defineProperty({},'passive',{get:()=>(k=!0,!0)});y.addEventListener('test',()=>{},t),y.removeEventListener('test',()=>{},t)}catch{}const I=!!k&&{passive:!0};class V{isDown=!1;isLocked=!1;scroll=0;scrollWidth=0;scrollHeight=0;lt=1;ct=.01;ut=0;ft=0;_t=0;P=[];dt=new Set;gt=new Set;wt=null;bt=null;vt=!1;Tt=0;St=0;yt=!0;Ct=!1;kt=new g({y:0}).easing('0.35,0.15,0,1').onUpdate(t=>{y.scrollTo(0,t.y),this.vt=!0,this.scroll=t.y,this.ut=t.y,this.isDown=this.ut>=this.ft,this.ft=this.ut});It=0;Vt=0;xt;Mt;Ot;Dt=!1;Ft=null;Pt=0;jt=0;B;At;zt=this.Lt.bind(this);Et=()=>{this.isLocked||(this.Ct=!0)};Nt=t=>{t.stopPropagation(),this.isLocked||(this.Ct=!1)};Ut=()=>{this.isLocked||(this.kt.stop(),this.Ct=!1)};Bt=()=>{if(this.isLocked)return;this.vt=!0;const t=Math.max(0,this.scrollHeight-this._t),s=this.At();this.ut=s<0?0:s>t?t:s,this.jt=this.scroll,this.Pt=0};constructor({container:t=y.document.body,content:s=y.document.body,easing:i=(t=>Math.min(1,1.001-2**(-10*t))),scrollDuration:h=0,listener:e=window,debug:n=!1,onResize:o}={}){if(this.Vt=h||0,this.xt=t,this.Mt=s,this.Ot=e,this.Dt=n,this.B=i,this.Ft=o||null,'scrollY'in this.Ot)this.At=()=>this.Ot.scrollY;else if('pageYOffset'in this.Ot)this.At=()=>this.Ot.pageYOffset;else{const t=this.Ot;this.At=()=>t.scrollTop}this.Ht(),this.Rt(),m.add(this.zt),m.play(),this.resize()}Ht(){if(!this.Ot)return;const t=I,s=this.Ot;s.addEventListener('touchstart',this.Et,t),s.addEventListener('scroll',this.Bt,t),s.addEventListener('mousedown',this.Nt,t),s.addEventListener('wheel',this.Ut,t)}Rt(){this.Dt&&this.xt&&(this.wt=document.createElement('canvas'),this.xt.appendChild(this.wt))}Lt(t){if(this.isLocked)return!0;const s=this.Mt.scrollWidth,i=this.Mt.scrollHeight;if(s!==this.scrollWidth||i!==this.scrollHeight)return this.scrollWidth=s,this.scrollHeight=i,s===this.Tt&&i===this.St||this.resize(),this.Tt=s,this.St=i,this.scroll=this.jt=this.ut,this.Wt(this.scroll,t),!0;if(this.gt.size>0)for(const s of this.gt){if(this.dt.has(s)&&this.vt)continue;const i=s.getData();Math.abs(i.smoothScrollValue-this.scroll)>this.ct&&s.update(this.scroll,this._t,this.isDown,!1,t)}if(!this.vt){const t=this.At();Math.abs(t-this.scroll)>1&&(this.vt=!0,this.ut=t,this.jt=this.scroll,this.Pt=0)}if(!this.vt)return!0;if(Math.abs(this.ut-this.scroll)<this.ct)return this.scroll=this.ut,this.Wt(this.scroll,t),this.Ct&&this.triggerAnimations(!0),this.vt=!1,!0;this.Pt+=t/1e3;const h=this.Ct?this.It:this.Vt,e=0===h?1:w(this.Pt/h,0,1),n=this.B(e);if(this.scroll=this.jt+(this.ut-this.jt)*n,this.yt){this.yt=!1,this.scroll=this.jt=this.ut;const t=this.isDown;this.isDown=!0,this.triggerAnimations(!0),this.isDown=!1,this.triggerAnimations(!0),this.isDown=t}return this.Wt(this.scroll,t),!0}Wt(t,s=16.6){if(this.isDown=t>=this.ft,this.ft=t,this.dt.size>0)for(const t of this.dt)t.update(this.scroll,this._t,this.isDown,!1,s);this.bt&&this.Yt()}draw(){this.Wt(this.scroll)}drawAll(){for(const t of this.P)t.update(this.scroll,this._t,this.isDown,!0)}getScrollPosition(){return this.At()}resize(){if(!this.xt||!this.Mt)return;this.scroll=this.jt=this.ft=this.ut,this.scrollHeight=this.Mt.scrollHeight,this._t=y.innerHeight,this.lt=y.devicePixelRatio;const t=y.scrollY||y.pageYOffset;for(let s=0;s<this.P.length;s++)this.P[s].resize(t,this._t);if(this.wt){const t=y.innerWidth,s=y.innerHeight,i=this.lt;this.wt.width=t*i,this.wt.height=s*i,Object.assign(this.wt.style,{position:'fixed',left:'0',top:'0',width:t+'px',height:s+'px',pointerEvents:'none',zIndex:'9999999'}),this.bt=this.wt.getContext('2d')}this.Ft&&this.Ft(),this.$t()}triggerAnimations(t=!1){if(t){const t=this.P.length;for(let s=0;s<t;s++)this.P[s].update(this.scroll,this._t,this.isDown,!0)}else for(const t of this.dt)t.update(this.scroll,this._t,this.isDown,!0);this.bt&&this.Yt()}Yt(){if(!this.bt||!this.wt)return;const t=this.bt;t.clearRect(0,0,this.wt.width,this.wt.height),t.strokeStyle='#f00',t.lineWidth=2*this.lt,t.beginPath();const s=this.lt,i=this._t;for(const h of this.dt){const e=h.getData(),n=e.box.top-e.scroll;n+e.box.height>=0&&n<=i&&t.rect(e.box.left*s,n*s,e.box.width*s,e.box.height*s)}t.stroke()}add(t,s,i={}){const h=Array.isArray(t)?t:[t];let e,n;'function'==typeof s?(e=s,n=i):(n=s||{},e=void 0);const o=n.directionOffset||0,r=n.offset||0,l=n.speed||1;let c=null;y.IntersectionObserver&&(c=new y.IntersectionObserver(t=>{for(const s of t){const t=s.target,i=this.P.find(s=>s.element===t);if(i){const t=s.isIntersecting;i.setVisible(t),t&&!i.smoothing?this.dt.add(i):t||i.smoothing||this.dt.delete(i),i.update(this.scroll,this._t,this.isDown)}}},{root:void 0===n.observeIn?null:n.observeIn,rootMargin:`${o?100*o:1/l*100}% 0% ${o?100*o:r?100*r:1/l*100}% 0%`,threshold:0}));const u=y.scrollY||y.pageYOffset;for(let t=0;t<h.length;t++){const s=h[t],i=new S(s,t,n,e,c);i.resize(u,this._t),c?(c.observe(s),i.setVisible(!1)):(this.dt.add(i),i.update(this.scroll,this._t,this.isDown,!0)),i.smoothing&&this.gt.add(i),this.P.push(i)}}$t(){this.dt.clear(),this.gt.clear();for(const t of this.P)t.smoothing&&this.gt.add(t),t.isVisible&&!t.smoothing&&this.dt.add(t)}remove(t){const s=new Set(Array.isArray(t)?t:[t]),i=[];for(const t of this.P)s.has(t.element)?(t.observer?.unobserve(t.element),this.dt.delete(t),this.gt.delete(t)):i.push(t);this.P=i}getBox(t){const s=t.getBoundingClientRect();return{left:s.left+(y.scrollX||y.pageXOffset),top:s.top+(y.scrollY||y.pageYOffset),width:s.width,height:s.height}}scrollTo(t=0,s=null){const i=s??w(25e-5*Math.abs(t-this.scroll),.25,2.5);return this.kt.from({y:this.scroll}).to({y:t},i).start()}scrollToElement(t,s=0,i=null){const h=this.getBox(t);return this.scrollTo(h.top+s,i)}reset(){for(const t of this.P)t.observer?.unobserve(t.element);this.P.length=0,this.dt.clear(),this.gt.clear(),this._t=0}stop(){this.vt=!1,this.kt.stop()}lock(){this.isLocked=!0}unlock(){this.isLocked=!1,y.scrollTo(0,this.scroll)}setContent(t){this.Mt=t,this.resize()}unsetContent(){this.Mt=null}setScrollDuration(t){this.Vt=t}setTouchScrollDuration(t){this.It=t}destroy(){if(this.wt?.remove(),this.Ot){const t=this.Ot,s=I;t.removeEventListener('touchstart',this.Et,s),t.removeEventListener('wheel',this.Ut,s),t.removeEventListener('mousedown',this.Nt,s),t.removeEventListener('scroll',this.Bt,s)}this.reset(),this.stop(),m.remove(this.zt)}}
/**
 * @license
 * Monomove - utilities for moving things
 *
 * Copyright © 2021-2025 Monokai (monokai.com)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */function x(t,s=1){return new g(t,s)}const M=(t,s,i=1,h='linear')=>x(t,i).to(s).easing(h).start(),O=t=>new v(t),D=t=>x().duration(t).start();function F(t,s,i={},h={}){const e=new V(h);return e.add(t,s,i),e}export{m as RenderLoop,V as SmoothScroller,v as Timeline,g as Tween,t as TweenManager,M as animate,D as delay,F as smoothScroll,O as timeline,x as tween};
