import t from"./TweenManager.js";class i{static#t=[];static#i=[];static#s=0;static#e=!1;static#a=0;static#n=0;static#c=0;static#l=0;static#h=!1;static#r=0;static#m=0;static#o=!1;static#p=!0;static#u(){const i=()=>{this.#m=window.performance.now()-this.#n,this.#a=this.#l?this.#m-this.#l:0;const s=t.onTick(this.#m);if(this.#s=0,this.#e&&!this.#o)for(let t=0;t<this.#t.length;t++){const i=this.#t[t];i.isPlaying&&i.funk.call(i.context,this.#a)&&this.#s++}if(this.#e&&(this.#s>0||s)?this.#r=window.requestAnimationFrame(i):this.#h=!1,!this.#o)for(let t=0;t<this.#i.length;t++){const i=this.#i[t];i.isPlaying&&i.cleanUp.call(i.context)}this.#o=0===this.#s&&t.onlyHasDelayedTweens(this.#m),this.#l=this.#m};i()}static stop(t){this.#e=!1,window.cancelAnimationFrame(this.#r),t&&t()}static add(t,i,s){const e={context:t,funk:i,cleanUp:s,isPlaying:!0};this.#t.push(e),e.cleanUp&&this.#i.push(e),this.trigger()}static reset(){this.#t.length=0,this.#i.length=0,t.removeAll()}static remove(t,i){const s=s=>!(s.context===t&&(!i||s.funk===i));this.#t=this.#t.filter(s),this.#i=this.#i.filter(s),this.trigger()}static trigger(){this.#o=!1,this.#h||(this.#h=!0,this.#r=window.requestAnimationFrame(this.#u.bind(this)))}static getTime(){return this.#m=window.performance.now()-this.#n,this.#m}static pause(){this.#e&&(this.#c=window.performance.now(),this.#h=!1,this.stop())}static play(){this.#e||(this.#p||(this.#n+=window.performance.now()-this.#c),this.#p=!1,this.triggerAnimation())}static triggerAnimation(){this.#e=!0,this.trigger()}static isPlaying(){return this.#e}}export{i as default};
