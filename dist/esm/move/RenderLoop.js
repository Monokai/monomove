import{classStaticPrivateFieldSpecGet as t,classStaticPrivateMethodGet as i,classStaticPrivateFieldSpecSet as s}from"../_virtual/_rollupPluginBabelHelpers.js";import e from"./TweenManager.js";class a{static staticConstructor(){var s;if(null===(s=t(this,a,b))||void 0===s||!s.now){const i=t(this,a,b).timing&&t(this,a,b).timing.navigationStart?t(this,a,b).timing.navigationStart:Date.now();t(this,a,b).now=function(){return Date.now()-i}}i(this,a,h).call(this)}static stop(i){s(this,a,o,!1),window.cancelAnimationFrame(t(this,a,f)),i&&i()}static add(i,s,e){const h={context:i,funk:s,cleanUp:e,isPlaying:!0};t(this,a,n).push(h),h.cleanUp&&t(this,a,l).push(h),this.trigger()}static reset(){t(this,a,n).length=0,t(this,a,l).length=0,e.removeAll()}static remove(i,e){const h=t=>!(t.context===i&&(!e||t.funk===e));s(this,a,n,t(this,a,n).filter(h)),s(this,a,l,t(this,a,l).filter(h)),this.trigger()}static trigger(){s(this,a,p,!1),t(this,a,g)||(s(this,a,g,!0),s(this,a,f,window.requestAnimationFrame(i(this,a,h).bind(this))))}static getTime(){return s(this,a,m,t(this,a,b).now()-t(this,a,u)),t(this,a,m)}static pause(){t(this,a,o)&&(s(this,a,w,t(this,a,b).now()),s(this,a,g,!1),this.stop())}static play(){t(this,a,o)||(s(this,a,u,t(this,a,u)+(t(this,a,b).now()-t(this,a,w))),s(this,a,o,!0),this.trigger())}static isPlaying(){return t(this,a,o)}}function h(){const i=()=>{s(this,a,m,t(this,a,b).now()-t(this,a,u)),s(this,a,c,t(this,a,v)?t(this,a,m)-t(this,a,v):0);const h=e.onTick(t(this,a,m));if(s(this,a,r,0),t(this,a,o)&&!t(this,a,p))for(let i=0;i<t(this,a,n).length;i++){const e=t(this,a,n)[i];var w;if(e.isPlaying)e.funk.call(e.context,t(this,a,c))&&s(this,a,r,(w=t(this,a,r),++w))}if(t(this,a,o)&&(t(this,a,r)>0||h)?s(this,a,f,window.requestAnimationFrame(i)):s(this,a,g,!1),!t(this,a,p))for(let i=0;i<t(this,a,l).length;i++){const s=t(this,a,l)[i];s.isPlaying&&s.cleanUp.call(s.context)}s(this,a,p,0===t(this,a,r)&&e.onlyHasDelayedTweens(t(this,a,m))),s(this,a,v,t(this,a,m))};i()}var n={writable:!0,value:[]},l={writable:!0,value:[]},r={writable:!0,value:0},o={writable:!0,value:!0},c={writable:!0,value:0},u={writable:!0,value:0},w={writable:!0,value:0},v={writable:!0,value:0},g={writable:!0,value:!0},f={writable:!0,value:0},m={writable:!0,value:0},p={writable:!0,value:!1},b={writable:!0,value:window.performance};a.staticConstructor();export{a as default};
