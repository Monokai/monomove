import{classStaticPrivateFieldSpecSet as t,classStaticPrivateFieldSpecGet as i,classStaticPrivateMethodGet as s}from"../_virtual/_rollupPluginBabelHelpers.js";import e from"./TweenManager.js";class a{static stop(s){t(this,a,o,!1),window.cancelAnimationFrame(i(this,a,g)),s&&s()}static add(t,s,e){const h={context:t,funk:s,cleanUp:e,isPlaying:!0};i(this,a,l).push(h),h.cleanUp&&i(this,a,r).push(h),this.trigger()}static reset(){i(this,a,l).length=0,i(this,a,r).length=0,e.removeAll()}static remove(s,e){const h=t=>!(t.context===s&&(!e||t.funk===e));t(this,a,l,i(this,a,l).filter(h)),t(this,a,r,i(this,a,r).filter(h)),this.trigger()}static trigger(){t(this,a,m,!1),i(this,a,v)||(t(this,a,v,!0),t(this,a,g,window.requestAnimationFrame(s(this,a,h).bind(this))))}static getTime(){return t(this,a,f,window.performance.now()-i(this,a,w)),i(this,a,f)}static pause(){i(this,a,o)&&(t(this,a,u,window.performance.now()),t(this,a,v,!1),this.stop())}static play(){i(this,a,o)||(t(this,a,w,i(this,a,w)+(window.performance.now()-i(this,a,u))),t(this,a,o,!0),this.trigger())}static isPlaying(){return i(this,a,o)}}function h(){const s=()=>{t(this,a,f,window.performance.now()-i(this,a,w)),t(this,a,c,i(this,a,p)?i(this,a,f)-i(this,a,p):0);const h=e.onTick(i(this,a,f));if(t(this,a,n,0),i(this,a,o)&&!i(this,a,m))for(let s=0;s<i(this,a,l).length;s++){const e=i(this,a,l)[s];var u;if(e.isPlaying)e.funk.call(e.context,i(this,a,c))&&t(this,a,n,(u=i(this,a,n),++u))}if(i(this,a,o)&&(i(this,a,n)>0||h)?t(this,a,g,window.requestAnimationFrame(s)):t(this,a,v,!1),!i(this,a,m))for(let t=0;t<i(this,a,r).length;t++){const s=i(this,a,r)[t];s.isPlaying&&s.cleanUp.call(s.context)}t(this,a,m,0===i(this,a,n)&&e.onlyHasDelayedTweens(i(this,a,f))),t(this,a,p,i(this,a,f))};s()}var l={writable:!0,value:[]},r={writable:!0,value:[]},n={writable:!0,value:0},o={writable:!0,value:!1},c={writable:!0,value:0},w={writable:!0,value:0},u={writable:!0,value:0},p={writable:!0,value:0},v={writable:!0,value:!1},g={writable:!0,value:0},f={writable:!0,value:0},m={writable:!0,value:!1};export{a as default};
