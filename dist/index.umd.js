!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).monomove={})}(this,(function(t){"use strict";const i={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};class e{_iterations;_cacheSize;_cachedValueStepSize=0;_cachedValues=[0];_x1;_y1;_x2;_y2;_isPreComputed;static _calculate(t,i,e){return(((1-3*e+3*i)*t+(3*e-6*i))*t+3*i)*t}static _getSlope(t,i,e){return 3*(1-3*e+3*i)*t**2+2*(3*e-6*i)*t+3*i}constructor(t,e=0,s=0,n=0){if(this._iterations=16,this._cacheSize=11,this.setCacheSize(this._cacheSize),"string"==typeof t){const e=i[t];if(e)this._x1=e[0],this._y1=e[1],this._x2=e[2],this._y2=e[3];else{const i=t.split(",");this._x1=Number(i[0]),this._y1=Number(i[1]),this._x2=Number(i[2]),this._y2=Number(i[3])}}else this._x1=t,this._y1=e,this._x2=s,this._y2=n;this._isPreComputed=!1}_newtonRaphson(t,i,s,n){let o=i;for(let i=0;i<this._iterations;++i){const i=e._getSlope(o,s,n);if(0===i)return o;o-=(e._calculate(o,s,n)-t)/i}return o}_preCompute(){this._cachedValues=new Array(this._cacheSize);for(let t=0;t<this._cacheSize;++t)this._cachedValues[t]=e._calculate(t*this._cachedValueStepSize,this._x1,this._x2);this._isPreComputed=!0}_getT(t){const i=this._cacheSize-1;let e=0,s=1;for(;s!==i&&this._cachedValues[s]<=t;++s)e+=this._cachedValueStepSize;--s;const n=e+(t-this._cachedValues[s])/(this._cachedValues[s+1]-this._cachedValues[s])*this._cachedValueStepSize;return this._newtonRaphson(t,n,this._x1,this._x2)}get(t){return this._isPreComputed||this._preCompute(),0===t?0:1===t?1:e._calculate(this._getT(t),this._y1,this._y2)}setIterations(t){this._iterations=t}setCacheSize(t){this._cacheSize=t,this._cachedValueStepSize=1/(this._cacheSize-1),this._cachedValues=new Array(this._cacheSize),this._isPreComputed=!1}}class s{static _tweens=[];static _time=0;static _easingCache=new Map;static _isUpdating=!1;static bezierIterations=null;static bezierCacheSize=null;static getAll(){const t=[],i=this._tweens.length;for(let e=0;e<i;e++){const i=this._tweens[e];null!==i&&t.push(i)}return t}static removeAll(){const t=this._tweens.length;for(let i=0;i<t;i++)this._tweens[i]?.stop();this._tweens.length=0,this._easingCache.clear()}static add(t){this._tweens.push(t)}static remove(t){const i=this._tweens.indexOf(t);-1!==i&&(this._isUpdating?this._tweens[i]=null:this._tweens.splice(i,1))}static onlyHasDelayedTweens(t){const i=this._tweens,e=i.length;for(let s=0;s<e;s++){const e=i[s];if(null!==e&&(null===e.startTime||t>=e.startTime))return!1}return e>0}static onTick(t){const i=this._tweens,e=i.length;if(0===e)return!1;this._time=t,this._isUpdating=!0;let s=0;for(let n=0;n<e;n++){const e=i[n];null!==e&&e.update(t)&&(n!==s&&(i[s]=e),s++)}this._isUpdating=!1;const n=i.length;if(n>e)for(let t=e;t<n;t++)i[s++]=i[t];return i.length=s,s>0}static setBezierIterations(t){this.bezierIterations=t}static setBezierCacheSize(t){this.bezierCacheSize=t}static getEasingFromCache(t){return this._easingCache.has(t)||this._easingCache.set(t,new e(t)),this._easingCache.get(t)}}const n="undefined"!=typeof window;class o{static _subscribers=[];static _cleanups=[];static _isUpdating=!1;static _activeCount=0;static _ms=0;static _time=0;static _previousTime=0;static _pauseTime=0;static _pauseTimeStart=0;static _isAnimating=!1;static _requestAnimation=!1;static _requestID=0;static _onlyHasDelayedTweens=!1;static _isFirstTime=!0;static _loopHandler=o._animate.bind(o);static _animate(){if(!n)return;const t=window.performance.now();this._time=t-this._pauseTime,this._isFirstTime?(this._ms=0,this._isFirstTime=!1):this._ms=this._time-this._previousTime,this._ms<0&&(this._ms=0);const i=s.onTick(this._time);this._isUpdating=!0;let e=0;const o=this._subscribers.length,a=this._subscribers;for(let t=0;t<o;t++){const i=a[t];null!==i&&!0===i(this._ms)&&e++}if(!this._onlyHasDelayedTweens){const t=this._cleanups;for(let i=0;i<o;i++){const e=t[i];null!==e&&null!==a[i]&&e()}}this._isUpdating=!1,this._activeCount<a.length&&this._compact(),this._onlyHasDelayedTweens=0===e&&s.onlyHasDelayedTweens(this._time),this._previousTime=this._time,this._isAnimating&&(e>0||i)?(this._requestID=window.requestAnimationFrame(this._loopHandler),this._requestAnimation=!0):this._requestAnimation=!1}static _compact(){let t=0;const i=this._subscribers.length,e=this._subscribers,s=this._cleanups;for(let n=0;n<i;n++){const i=e[n];null!==i&&(n!==t&&(e[t]=i,s[t]=s[n]),t++)}e.length=t,s.length=t,this._activeCount=t}static stop(t){this._isAnimating=!1,n&&window.cancelAnimationFrame(this._requestID),this._requestAnimation=!1,t&&t()}static add(t,i){this._subscribers.push(t),this._cleanups.push(i||null),this._activeCount++,this.trigger()}static reset(){this._subscribers.length=0,this._cleanups.length=0,this._activeCount=0,s.removeAll(),this.stop(),this._ms=0,this._time=0,this._previousTime=0,this._pauseTime=0,this._pauseTimeStart=0,this._isAnimating=!1,this._requestAnimation=!1,this._requestID=0,this._onlyHasDelayedTweens=!1,this._isFirstTime=!0}static remove(t){const i=this._subscribers.indexOf(t);-1!==i&&(this._isUpdating?(this._subscribers[i]=null,this._cleanups[i]=null,this._activeCount--):(this._subscribers.splice(i,1),this._cleanups.splice(i,1),this._activeCount--)),this.trigger()}static trigger(){this._onlyHasDelayedTweens=!1,n&&(this._requestAnimation||(this._isFirstTime||(this._previousTime=this.getTime()),this._requestAnimation=!0,this._requestID=window.requestAnimationFrame(this._loopHandler)))}static getTime(){return n?window.performance.now()-this._pauseTime:0}static pause(){this._isAnimating&&n&&(this._pauseTimeStart=window.performance.now(),this._requestAnimation=!1,this._isAnimating=!1,window.cancelAnimationFrame(this._requestID))}static play(){!this._isAnimating&&n&&(this._isFirstTime||(this._pauseTime+=window.performance.now()-this._pauseTimeStart),this.triggerAnimation())}static triggerAnimation(){this._isAnimating=!0,this.trigger()}static isPlaying(){return this._isAnimating}}class a{durationMS;isPlaying;delayTime;startTime;easingFunction;object;value;onTimelineInCallback=null;onTimelineOutCallback=null;onTimelineVisibleCallback=null;onTimelineInvisibleCallback=null;timelineIn=!1;previousTimelineIn=!1;timelineVisible=!1;previousTimelineVisible=!1;_onUpdateCallback;_onLoopCallback;_onCompleteCallback;_onStartCallback;_valuesEnd;_valuesStart;_propKeys;_propStartValues;_propChangeValues;_loopNum;_loopCount;_onStartCallbackFired;_previousTime;_elapsed;_previousUpdateValue;_inverseDuration;_targetIsFunction;_isInitialized=!1;constructor(t,i=1){if(this.durationMS=1e3*i,this._inverseDuration=this.durationMS>0?1/this.durationMS:0,this.easingFunction=t=>t,this.value=0,this.delayTime=0,this.isPlaying=!1,this.startTime=null,this._loopNum=0,this._loopCount=0,this._onLoopCallback=null,this._onCompleteCallback=null,this._onStartCallback=null,this._onStartCallbackFired=!1,this._previousTime=null,this._elapsed=0,this._previousUpdateValue=null,this._valuesStart={},this._propKeys=[],this._propStartValues=[],this._propChangeValues=[],this._isInitialized=!1,"function"==typeof t)this._targetIsFunction=!0,this.object=null,this._onUpdateCallback=t,this._valuesStart.value=0,this._valuesEnd={value:1};else{this._targetIsFunction=!1,this.object=t,this._onUpdateCallback=null,this._valuesEnd={};const i=this.object,e=Object.keys(i);for(let t=0;t<e.length;t++){const s=e[t],n=i[s];"number"==typeof n&&(this._valuesStart[s]=n)}}}from(t){if(this._targetIsFunction){const i=t,e=Object.keys(i);for(const t of e){const e=i[t];"number"==typeof e&&(this._valuesStart[t]=e)}}else for(const i in t){const e=t[i];"number"==typeof e&&this.object&&(this.object[i]=e,this._valuesStart[i]=e)}return this._isInitialized=!1,this._onUpdateCallback&&this.updateAllValues(0),this}to(t,i){return void 0!==i&&(this.durationMS=1e3*i,this._inverseDuration=this.durationMS>0?1/this.durationMS:0),this._valuesEnd={...this._valuesEnd,...t},this._isInitialized=!1,this}duration(t){return this.durationMS=1e3*t,this._inverseDuration=this.durationMS>0?1/this.durationMS:0,this}rewind(){if(this.stop(),this.value=0,this._elapsed=0,!this._targetIsFunction&&this.object){const t=this.object;for(const i in this._valuesStart)t[i]=this._valuesStart[i]}return this._isInitialized=!1,this.invalidate(),this}restart(){return this.rewind().start()}loop(t=1/0){return this._loopNum=t,this._loopCount=t,this}setLoopCallback(t){return this._onLoopCallback=t,this}_init(){if(!this._isInitialized){if(this._propKeys.length=0,this._propStartValues.length=0,this._propChangeValues.length=0,!this._targetIsFunction&&this.object){let t=!1;for(const i in this._valuesEnd){t=!0;break}if(!t){const t=this.object;for(const i in t)if(i in this._valuesStart){const e=t[i];"number"==typeof e&&(this._valuesEnd[i]=e)}}}for(const t in this._valuesEnd){const i=this._valuesEnd[t];let e=this._valuesStart[t];if(!this._targetIsFunction&&void 0===e&&this.object){const i=this.object[t];"number"==typeof i&&(e=i,this._valuesStart[t]=e)}this._targetIsFunction&&void 0===e&&(e=0),"number"==typeof e&&"number"==typeof i&&(this._propKeys.push(t),this._propStartValues.push(e),this._propChangeValues.push(i-e))}this._isInitialized=!0}}startTween(t=o.getTime()){this._init();const i=this.isPlaying;return this._elapsed=0,this._onStartCallbackFired=!1,this.isPlaying=!0,this.startTime=t+this.delayTime,0===this.durationMS&&0===this._loopNum&&0===this.delayTime?(this.update(t),this.isPlaying=!1):i||(s.add(this),o.triggerAnimation()),this}start(t){const i=this._onCompleteCallback;return new Promise((e=>{this._onCompleteCallback=(t,s)=>{i&&i(t,s),this._onCompleteCallback=i,e(this)},this.startTween(t)}))}stop(){return this.isPlaying?(this.isPlaying=!1,s.remove(this),this):this}delay(t){return this.delayTime=1e3*t,this}easing(t=(t=>t),{iterations:i=s.bezierIterations??void 0,cacheSize:e=s.bezierCacheSize??void 0}={}){if(!t)return this;if("string"==typeof t){const n=s.getEasingFromCache(t);i&&n.setIterations&&n.setIterations(i),e&&n.setCacheSize&&n.setCacheSize(e),this.easingFunction=n.get.bind(n)}else if("object"==typeof t&&null!==t&&"get"in t){const s=t;i&&s.setIterations&&s.setIterations(i),e&&s.setCacheSize&&s.setCacheSize(e),this.easingFunction=s.get.bind(s)}else this.easingFunction=t;return this}onStart(t){return this._onStartCallback=t,this}onUpdate(t){return this._onUpdateCallback=t,this}onComplete(t=null){return this._onCompleteCallback=t,this}onTimelineIn(t){return this.onTimelineInCallback=t,this}onTimelineOut(t){return this.onTimelineOutCallback=t,this}onTimelineVisible(t){return this.onTimelineVisibleCallback=t,this}onTimelineInvisible(t){return this.onTimelineInvisibleCallback=t,this}setPosition(t){this._init();const i=t<0?0:t>1?1:t;this.value=this.easingFunction(i),this.updateAllValues()}updateAllValues(t=0){if(this._isInitialized||this._init(),this.value!==this._previousUpdateValue){if(this._targetIsFunction){if(this._propStartValues.length>0){const i=this._propStartValues[0]+this._propChangeValues[0]*this.value;this._onUpdateCallback&&this._onUpdateCallback(i,this.value,t)}}else{const i=this._propKeys.length,e=this._propKeys,s=this._propStartValues,n=this._propChangeValues,o=this.value,a=this.object;for(let t=0;t<i;t++)a[e[t]]=s[t]+n[t]*o;this._onUpdateCallback&&this._onUpdateCallback(this.object,o,t)}this._previousUpdateValue=this.value}}invalidate(){return this._previousUpdateValue=null,this}update(t){if(null===this.startTime)return!0;if(t<this.startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this.object&&this._onStartCallback(this.object),this._onStartCallbackFired=!0,o.trigger()),this._elapsed=t-this.startTime;const i=0===this.durationMS?1:this._elapsed*this._inverseDuration,e=i>1?1:i;this.value=this.easingFunction(e),null===this._previousTime&&(this._previousTime=t);const s=t-this._previousTime;if(this._previousTime=t,this.updateAllValues(s),1===e){const e=this.startTime;if(0===this.durationMS)return this._onCompleteCallback&&this.isPlaying&&this.object&&this._onCompleteCallback(this.object,0),this.isPlaying=!1,!1;if(this._loopCount>0)return this._onLoopCallback&&this.object&&this._onLoopCallback(this.object,this._loopNum-this._loopCount),this._loopCount--,this.startTime+=this.durationMS,this._elapsed=t-this.startTime,!0;this._onCompleteCallback&&this.isPlaying&&this.object&&this._onCompleteCallback(this.object,t-this.startTime);const s=e!==this.startTime;return this.isPlaying=s||this.isPlaying&&i<1,this.isPlaying}return!0}}class h{previousPosition;startTime=null;delayTime=0;durationMS=0;value=0;easingFunction=t=>t;totalTime=0;_driverTween=null;_tweens=[];_loopNum=0;constructor({delay:t=0}={}){this.previousPosition=0,this.delayTime=1e3*t}static setTweenIn(t,i){t.timelineIn=i,t.timelineIn!==t.previousTimelineIn&&(i&&t.onTimelineInCallback&&t.object?t.onTimelineInCallback(t.object):!i&&t.onTimelineOutCallback&&t.object&&t.onTimelineOutCallback(t.object),t.previousTimelineIn=t.timelineIn)}static setTweenVisibility(t,i){t.timelineVisible=i,t.timelineVisible!==t.previousTimelineVisible&&(i&&t.onTimelineVisibleCallback&&t.object?t.onTimelineVisibleCallback(t.object):!i&&t.onTimelineInvisibleCallback&&t.object&&t.onTimelineInvisibleCallback(t.object),t.previousTimelineVisible=t.timelineVisible)}delay(t){return this.delayTime=1e3*t,this}loop(t=1/0){return this._loopNum=t,this}stop(){return this._driverTween?.stop(),this}destroy(){this.stop();for(let t=0;t<this._tweens.length;t++)this._tweens[t].stop();this._tweens.length=0,this.totalTime=0}start(){const t=new a((t=>{this.setPosition(t)}),this.totalTime/1e3);return this._driverTween=t,0!==this._loopNum&&t.loop(this._loopNum),t.delay(this.delayTime/1e3),t.start().then((()=>this))}updateAllValues(){}invalidate(){}}function l(t,i,e=Number.MAX_VALUE){return t<i?i:t>e?e:t}class r extends h{_startTimes=[];_durations=[];_cursor=0;constructor(t){super(t)}add(t,i=0){const e=void 0!==t.totalTime?t.totalTime:t.durationMS,s=1e3*i,n=this._cursor+s;return this._register(t,n,e),this}at(t,i){const e=void 0!==i.totalTime?i.totalTime:i.durationMS,s=1e3*t;return this._register(i,s,e),this}_register(t,i,e){t.delayTime=i,this._tweens.push(t),this._startTimes.push(i),this._durations.push(e);const s=i+e;s>this._cursor&&(this._cursor=s),s>this.totalTime&&(this.totalTime=s)}async start(){this.stop();const t=new a((t=>{this.setPosition(t)}),this.totalTime/1e3);return this._driverTween=t,0!==this._loopNum&&t.loop(this._loopNum),t.delay(this.delayTime/1e3),t.start().then((()=>this))}setPosition(t){const i=l(t,0,1)*this.totalTime,e=this._tweens.length,s=this._startTimes,n=this._durations,o=this._tweens;for(let t=0;t<e;t++){const e=o[t],l=s[t],r=n[t],c=l+r;if(i<l)e.setPosition(0),e instanceof a&&(h.setTweenVisibility(e,!1),h.setTweenIn(e,!1),e.invalidate(),e.updateAllValues());else if(i>=c)e.setPosition(1),e instanceof a&&(h.setTweenVisibility(e,!0),h.setTweenIn(e,!1),e.invalidate(),e.updateAllValues());else{const t=0===r?1:(i-l)/r;e.setPosition(t),e instanceof a&&(h.setTweenVisibility(e,!0),h.setTweenIn(e,!0),e.invalidate(),e.updateAllValues())}}this.previousPosition=t}update(){return this.setPosition(this.previousPosition||0),!0}}class c{element;smoothing;observer;_box;_data;_hasEnteredOnce=!1;_hasExitedOnce=!1;_previousIsInView=!1;_previousFactor=NaN;_directionOffset;_offset;_speed;_onUpdate;_onScrolledIn;_onScrolledOut;_onScrolledInOnce;_onScrolledOutOnce;_smoothScrollFn;constructor(t,i,e,s,n=null){this.element=t,this.observer=n,this._directionOffset=e.directionOffset||0,this._offset=e.offset||0,this._speed=e.speed||1,this.smoothing=e.smoothing||0,s?this._onUpdate=s:e.onUpdate&&(this._onUpdate=e.onUpdate),this._onScrolledIn=e.onScrolledIn,this._onScrolledOut=e.onScrolledOut,this._onScrolledInOnce=e.onScrolledInOnce,this._onScrolledOutOnce=e.onScrolledOutOnce,this._box={left:0,top:0,width:0,height:0},this._data={item:t,factor:0,rawFactor:0,rawBoxFactor:0,boxFactor:0,box:this._box,scroll:0,smoothScrollValue:0,isInView:!1,boxIsInView:!1,index:i,centerOffset:0,originalTop:0,isVisible:!0,data:e.data}}setVisible(t){this._data.isVisible=t}get isVisible(){return this._data.isVisible}getData(){return this._data}resize(t,i){const e=this.element.getBoundingClientRect(),s=window.scrollX||window.pageXOffset;this._box.left=e.left+s,this._box.top=e.top+t,this._box.width=e.width,this._box.height=e.height,this._data.centerOffset=.5*(i-this._box.height),this._data.originalTop=this._box.top,this._data.scroll=this._data.smoothScrollValue}update(t,i,e,s=!1,n=16.6){const o=this._box;if(0===o.height)return;if(this._data.scroll=t,this.smoothing&&this._smoothScrollFn){const i=60*n/1e3;this._data.smoothScrollValue=this._smoothScrollFn(t,i,this.smoothing)}else this._data.smoothScrollValue=t;const a=this._directionOffset*(e?-1:1),h=o.top+o.height-this._data.smoothScrollValue+a*i+this._offset*i,l=h/(i+o.height),r=(h-i)/o.height,c=this._speed;this._data.rawFactor=(1-l-.5)*c+.5,this._data.rawBoxFactor=(1-r-.5)*c+.5,this._data.factor=this._data.rawFactor<0?0:this._data.rawFactor>1?1:this._data.rawFactor,this._data.boxFactor=this._data.rawBoxFactor<0?0:this._data.rawBoxFactor>1?1:this._data.rawBoxFactor,this._data.isInView=this._data.rawFactor>=0&&this._data.rawFactor<=1,this._data.boxIsInView=this._data.rawBoxFactor>=0&&this._data.rawBoxFactor<=1,this._data.isInView!==this._previousIsInView&&(this._data.isInView?(this.smoothing&&(this._smoothScrollFn=((t=0)=>(i,e=0,s=.95)=>i+(t-i)*s**e)(t)),this._onScrolledIn&&this._onScrolledIn(this._data),this._hasEnteredOnce||(this._hasEnteredOnce=!0,this._onScrolledInOnce&&this._onScrolledInOnce(this._data))):(this._onScrolledOut&&this._onScrolledOut(this._data),this._smoothScrollFn=void 0,this._hasExitedOnce||(this._hasExitedOnce=!0,this._onScrolledOutOnce&&this._onScrolledOutOnce(this._data))),this._previousIsInView=this._data.isInView),this._onUpdate&&(this._previousFactor!==this._data.factor||s)&&(this._onUpdate(this._data),this._previousFactor=this._data.factor)}}let _=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:()=>(_=!0,!0)});window.addEventListener("test",(()=>{}),t),window.removeEventListener("test",(()=>{}),t)}catch(t){}const u=!!_&&{passive:!0};class d{isDown=!1;isLocked=!1;scroll=0;scrollWidth=0;scrollHeight=0;_pixelRatio=1;_scrollThreshold=.01;_targetScroll=0;_previousScroll=0;_viewportHeight=0;_items=[];_activeItems=new Set;_smoothItems=new Set;_debugCanvas=null;_debugContext=null;_isAnimating=!1;_previousScrollWidth=0;_previousScrollHeight=0;_isFirstScrollInstant=!0;_isTouch=!1;_scrollTween=new a({y:0}).easing("0.35,0.15,0,1").onUpdate((t=>{window.scrollTo(0,t.y),this._isAnimating=!0,this.scroll=t.y,this._targetScroll=t.y,this.isDown=this._targetScroll>=this._previousScroll,this._previousScroll=this._targetScroll}));_touchScrollDuration=0;_scrollDuration=0;_container;_content;_listener;_debug=!1;_onResizeFunk=null;_totalTickTime=0;_scrollFrom=0;_easing;_getScrollFn;_tickHandler=this._onTick.bind(this);_touchStartHandler=()=>{this.isLocked||(this._isTouch=!0)};_mouseDownHandler=t=>{t.stopPropagation(),this.isLocked||(this._isTouch=!1)};_wheelHandler=()=>{this.isLocked||(this._scrollTween.stop(),this._isTouch=!1)};_scrollHandler=()=>{if(this.isLocked)return;this._isAnimating=!0;const t=Math.max(0,this.scrollHeight-this._viewportHeight),i=this._getScrollFn();this._targetScroll=i<0?0:i>t?t:i,this._scrollFrom=this.scroll,this._totalTickTime=0};constructor({container:t=window.document.body,content:i=window.document.body,easing:e=(t=>Math.min(1,1.001-2**(-10*t))),scrollDuration:s=0,listener:n=window,debug:a=!1,onResize:h}={}){if(this._scrollDuration=s||0,this._container=t,this._content=i,this._listener=n,this._debug=a||!1,this._easing=e,this._onResizeFunk=h||null,"scrollY"in this._listener)this._getScrollFn=()=>this._listener.scrollY;else if("pageYOffset"in this._listener)this._getScrollFn=()=>this._listener.pageYOffset;else{const t=this._listener;this._getScrollFn=()=>t.scrollTop}this._setupListeners(),this._setupDebug(),o.add(this._tickHandler),o.play(),this.resize()}_setupListeners(){if(!this._listener)return;const t=u,i=this._listener;i.addEventListener("touchstart",this._touchStartHandler,t),i.addEventListener("scroll",this._scrollHandler,t),i.addEventListener("mousedown",this._mouseDownHandler,t),i.addEventListener("wheel",this._wheelHandler,t)}_setupDebug(){this._debug&&this._container&&(this._debugCanvas=document.createElement("canvas"),this._container.appendChild(this._debugCanvas))}_onTick(t){if(this.isLocked)return!0;const i=this._content.scrollWidth,e=this._content.scrollHeight;if(i!==this.scrollWidth||e!==this.scrollHeight)return this.scrollWidth=i,this.scrollHeight=e,this._previousScrollWidth=i,this._previousScrollHeight=e,this.resize(),this.scroll=this._scrollFrom=this._targetScroll,this._updateAll(this.scroll,t),!0;if(this._smoothItems.size>0)for(const i of this._smoothItems){if(this._activeItems.has(i)&&this._isAnimating)continue;const e=i.getData();Math.abs(e.smoothScrollValue-this.scroll)>this._scrollThreshold&&i.update(this.scroll,this._viewportHeight,this.isDown,!1,t)}if(!this._isAnimating){const t=this._getScrollFn();Math.abs(t-this.scroll)>1&&(this._isAnimating=!0,this._targetScroll=t,this._scrollFrom=this.scroll,this._totalTickTime=0)}if(!this._isAnimating)return!0;const s=this._targetScroll-this.scroll;if(Math.abs(s)<this._scrollThreshold)return this.scroll=this._targetScroll,this._updateAll(this.scroll,t),this._isTouch&&this.triggerAnimations(!0),this._isAnimating=!1,!0;this._totalTickTime+=t/1e3;const n=this._isTouch?this._touchScrollDuration:this._scrollDuration,o=0===n?1:l(this._totalTickTime/n,0,1),a=this._easing(o);if(this.scroll=this._scrollFrom+(this._targetScroll-this._scrollFrom)*a,this._isFirstScrollInstant){this._isFirstScrollInstant=!1,this.scroll=this._scrollFrom=this._targetScroll;const t=this.isDown;this.isDown=!0,this.triggerAnimations(!0),this.isDown=!1,this.triggerAnimations(!0),this.isDown=t}return this._updateAll(this.scroll,t),!0}_updateAll(t,i=16.6){if(this.isDown=t>=this._previousScroll,this._previousScroll=t,this._activeItems.size>0)for(const t of this._activeItems)t.update(this.scroll,this._viewportHeight,this.isDown,!1,i);this._debugContext&&this._drawDebug()}draw(){this._updateAll(this.scroll)}drawAll(){for(const t of this._items)t.update(this.scroll,this._viewportHeight,this.isDown,!0)}getScrollPosition(){return this._getScrollFn()}resize(){if(!this._container||!this._content)return;this.scroll=this._scrollFrom=this._previousScroll=this._targetScroll,this.scrollHeight=this._content.scrollHeight,this._viewportHeight=window.innerHeight,this._pixelRatio=window.devicePixelRatio;const t=window.scrollY||window.pageYOffset;for(let i=0;i<this._items.length;i++)this._items[i].resize(t,this._viewportHeight);if(this._debugCanvas){const t=window.innerWidth,i=window.innerHeight,e=this._pixelRatio;this._debugCanvas.width=t*e,this._debugCanvas.height=i*e,Object.assign(this._debugCanvas.style,{position:"fixed",left:"0",top:"0",width:`${t}px`,height:`${i}px`,pointerEvents:"none",zIndex:"9999999"}),this._debugContext=this._debugCanvas.getContext("2d")}this._onResizeFunk&&this._onResizeFunk(),this._refreshActiveSets()}triggerAnimations(t=!1){if(t){const t=this._items.length;for(let i=0;i<t;i++)this._items[i].update(this.scroll,this._viewportHeight,this.isDown,!0)}else for(const t of this._activeItems)t.update(this.scroll,this._viewportHeight,this.isDown,!0);this._debugContext&&this._drawDebug()}_drawDebug(){if(!this._debugContext||!this._debugCanvas)return;const t=this._debugContext;t.clearRect(0,0,this._debugCanvas.width,this._debugCanvas.height),t.strokeStyle="#f00",t.lineWidth=2*this._pixelRatio,t.beginPath();const i=this._pixelRatio,e=this._viewportHeight;for(const s of this._activeItems){const n=s.getData(),o=n.box.top-n.scroll;o+n.box.height>=0&&o<=e&&t.rect(n.box.left*i,o*i,n.box.width*i,n.box.height*i)}t.stroke()}add(t,i,e={}){const s=Array.isArray(t)?t:[t];let n,o;"function"==typeof i?(n=i,o=e):(o=i||{},n=void 0);const a=!!window.IntersectionObserver,h=void 0===o.observeIn?null:o.observeIn,l=o.directionOffset||0,r=o.offset||0,_=o.speed||1,u=`${l?100*l:1/_*100}% 0% ${l?100*l:r?100*r:1/_*100}% 0%`;let d=null;a&&(d=new window.IntersectionObserver((t=>{for(const i of t){const t=i.target,e=this._items.find((i=>i.element===t));if(e){const t=i.isIntersecting;e.setVisible(t),t&&!e.smoothing?this._activeItems.add(e):t||e.smoothing||this._activeItems.delete(e),e.update(this.scroll,this._viewportHeight,this.isDown)}}}),{root:h,rootMargin:u,threshold:0}));const p=window.scrollY||window.pageYOffset;for(let t=0;t<s.length;t++){const i=s[t],e=new c(i,t,o,n,d);e.resize(p,this._viewportHeight),d?(d.observe(i),e.setVisible(!1)):(this._activeItems.add(e),e.update(this.scroll,this._viewportHeight,this.isDown,!0)),e.smoothing&&this._smoothItems.add(e),this._items.push(e)}}_refreshActiveSets(){this._activeItems.clear(),this._smoothItems.clear();for(const t of this._items)t.smoothing&&this._smoothItems.add(t),t.isVisible&&!t.smoothing&&this._activeItems.add(t)}remove(t){const i=Array.isArray(t)?t:[t],e=new Set(i),s=[];for(const t of this._items)e.has(t.element)?(t.observer?.unobserve(t.element),this._activeItems.delete(t),this._smoothItems.delete(t)):s.push(t);this._items=s}static getBox(t){const i=t.getBoundingClientRect(),e=window.scrollY||window.pageYOffset,s=window.scrollX||window.pageXOffset;return{left:i.left+s,top:i.top+e,width:i.width,height:i.height}}scrollTo(t=0,i=null){const e=Math.abs(t-this.scroll),s=i??l(25e-5*e,.25,2.5);return this._scrollTween.from({y:this.scroll}).to({y:t},s).start()}scrollToElement(t,i=0,e=null){const s=d.getBox(t);return this.scrollTo(s.top+i,e)}reset(){for(const t of this._items)t.observer?.unobserve(t.element);this._items.length=0,this._activeItems.clear(),this._smoothItems.clear(),this._viewportHeight=0}stop(){this._isAnimating=!1,this._scrollTween.stop()}lock(){this.isLocked=!0}unlock(){this.isLocked=!1,window.scrollTo(0,this.scroll)}setContent(t){this._content=t,this.resize()}unsetContent(){this._content=null}setScrollDuration(t){this._scrollDuration=t}setTouchScrollDuration(t){this._touchScrollDuration=t}destroy(){if(this._debugCanvas?.remove(),this._listener){const t=this._listener,i=u;t.removeEventListener("touchstart",this._touchStartHandler,i),t.removeEventListener("wheel",this._wheelHandler,i),t.removeEventListener("mousedown",this._mouseDownHandler,i),t.removeEventListener("scroll",this._scrollHandler,i)}this.reset(),this.stop(),o.remove(this._tickHandler)}}t.CubicBezier=e,t.RenderLoop=o,t.SmoothScroller=d,t.Timeline=r,t.Tween=a,t.TweenChain=class extends r{constructor(t,i={}){super(i);for(let i=0;i<t.length;i++)this.add(t[i])}}
/**
     * @license
     * Monomove - utilities for moving things
     *
     * Copyright © 2021-2025 Monokai (monokai.com)
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the “Software”), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice and this permission notice shall be included in all
     * copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
     * SOFTWARE.
     */,t.TweenManager=s,t.animate=function(t,i,e=1,s="linear"){return new a(t,e).to(i).easing(s).start()},t.delay=async t=>new a({},t).start(),t.smoothScroll=function(t,i,e={},s={}){const n=new d(s);return n.add(t,i,e),n},t.timeline=function(t){return new r(t)},Object.defineProperty(t,"__esModule",{value:!0})}));
